$(document).ready(function () {
    function i() {
        $fieldItem.each(function () {
            var i = $(this), e = i.find(".colValue").text();
            console.log(e);
            var t = n * e;
            i.width(t)
        })
    }

    function e() {
        t = $gridContainer.innerWidth(), n = t / 12, $fieldItem.resizable("option", "grid", [n, 0]), $fieldItem.resizable("option", "minWidth", n)
    }

    $gridContainer = $(".FieldtypeFields_fieldsGrid"), $fieldItem = $(".FieldtypeFields_fieldItem"), $fieldItemColumns = $fieldItem.children(".colCount"), $inputsContainer = $gridContainer.find(".input");
    var t = $gridContainer.innerWidth(), n = Math.floor(t / 12);
    i(), $.fn.updateInput = function (i) {
        $input = this.find("input"), $input.attr({value: i})
    }, $gridContainer.sortable({placeholder: "FieldtypeFields_fieldItem placeholder"}).on("sortstart", function (i, e) {
        var t = e.helper.outerWidth() - 1;
        e.placeholder.width(t)
    }), $fieldItem.resizable({handles: "e", containment: "parent", grid: [n, 0], minWidth: n}).on("resizestart",function () {
        $(this).addClass("resizing").removeClass(function (i, e) {
            return(e.match(/\bcol_\S+/g) || []).join(" ")
        }).css("margin-left", "-1px").addClass("resizing")
    }).on("resizestop", function () {
        var i = $(this), e = i.find(".colCount span"), t = i.width(), d = Math.round(t / n);
        i.removeClass("resizing").addClass("col_" + d).attr({"data-columns": d, "data-ss-colspan": d}).updateInput(d), e.text(d)
    });
    var d = null;
    $(window).bind("resize", function () {
        d && clearTimeout(d), d = setTimeout(e, 200)
    })
});