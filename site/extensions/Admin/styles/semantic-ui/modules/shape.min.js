!function(e,t,i,n){e.fn.shape=function(t){var a,o=e(this),r=e("body"),s=(new Date).getTime(),d=[],u=arguments[0],l="string"==typeof u,c=[].slice.call(arguments,1);return o.each(function(){var g,f,m,p=o.selector||"",h=e.extend(!0,{},e.fn.shape.settings,t),v=h.namespace,b=h.selector,x=h.error,y=h.className,z="."+v,W="module-"+v,C=e(this),S=C.find(b.sides),w=C.find(b.side),k=!1,T=this,E=C.data(W);m={initialize:function(){m.verbose("Initializing module for",T),m.set.defaultSide(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),E=m,C.data(W,E)},destroy:function(){m.verbose("Destroying previous module for",T),C.removeData(W).off(z)},refresh:function(){m.verbose("Refreshing selector cache for",T),C=e(T),S=e(this).find(b.shape),w=e(this).find(b.side)},repaint:function(){m.verbose("Forcing repaint event");{var e=S.get(0)||i.createElement("div");e.offsetWidth}},animate:function(t,i){m.verbose("Animating box with properties",t),i=i||function(e){m.verbose("Executing animation callback"),e!==n&&e.stopPropagation(),m.reset(),m.set.active()},e.proxy(h.beforeChange,f[0])(),m.get.transitionEvent()?(m.verbose("Starting CSS animation"),C.addClass(y.animating),m.repaint(),C.addClass(y.animating),g.addClass(y.hidden),S.css(t).one(m.get.transitionEvent(),i),m.set.duration(h.duration)):i()},queue:function(e){m.debug("Queueing animation of",e),S.one(m.get.transitionEvent(),function(){m.debug("Executing queued animation"),setTimeout(function(){C.shape(e)},0)})},reset:function(){m.verbose("Animating states reset"),C.removeClass(y.animating).attr("style","").removeAttr("style"),S.attr("style","").removeAttr("style"),w.attr("style","").removeAttr("style").removeClass(y.hidden),f.removeClass(y.animating).attr("style","").removeAttr("style")},is:{animating:function(){return C.hasClass(y.animating)}},set:{defaultSide:function(){g=C.find("."+h.className.active),f=g.next(b.side).size()>0?g.next(b.side):C.find(b.side).first(),k=!1,m.verbose("Active side set to",g),m.verbose("Next side set to",f)},duration:function(e){e=e||h.duration,e="number"==typeof e?e+"ms":e,m.verbose("Setting animation duration",e),S.add(w).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},stageSize:function(){var e=C.clone().addClass(y.loading),t=e.find("."+h.className.active),i=k?e.find(k):t.next(b.side).size()>0?t.next(b.side):e.find(b.side).first(),n={};t.removeClass(y.active),i.addClass(y.active),e.prependTo(r),n={width:i.outerWidth(),height:i.outerHeight()},e.remove(),C.css(n),m.verbose("Resizing stage to fit new content",n)},nextSide:function(e){k=e,f=C.find(e),0===f.size()&&m.error(x.side),m.verbose("Next side manually set to",f)},active:function(){m.verbose("Setting new side to active",f),w.removeClass(y.active),f.addClass(y.active),e.proxy(h.onChange,f[0])(),m.set.defaultSide()}},flip:{up:function(){m.debug("Flipping up",f),m.is.animating()?m.queue("flip up"):(m.set.stageSize(),m.stage.above(),m.animate(m.get.transform.up()))},down:function(){m.debug("Flipping down",f),m.is.animating()?m.queue("flip down"):(m.set.stageSize(),m.stage.below(),m.animate(m.get.transform.down()))},left:function(){m.debug("Flipping left",f),m.is.animating()?m.queue("flip left"):(m.set.stageSize(),m.stage.left(),m.animate(m.get.transform.left()))},right:function(){m.debug("Flipping right",f),m.is.animating()?m.queue("flip right"):(m.set.stageSize(),m.stage.right(),m.animate(m.get.transform.right()))},over:function(){m.debug("Flipping over",f),m.is.animating()?m.queue("flip over"):(m.set.stageSize(),m.stage.behind(),m.animate(m.get.transform.over()))},back:function(){m.debug("Flipping back",f),m.is.animating()?m.queue("flip back"):(m.set.stageSize(),m.stage.behind(),m.animate(m.get.transform.back()))}},get:{transform:{up:function(){var e={y:-((g.outerHeight()-f.outerHeight())/2),z:-(g.outerHeight()/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((g.outerHeight()-f.outerHeight())/2),z:-(g.outerHeight()/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((g.outerWidth()-f.outerWidth())/2),z:-(g.outerWidth()/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((g.outerWidth()-f.outerWidth())/2),z:-(g.outerWidth()/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((g.outerWidth()-f.outerWidth())/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((g.outerWidth()-f.outerWidth())/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=i.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(t.style[e]!==n)return a[e]},nextSide:function(){return g.next(b.side).size()>0?g.next(b.side):C.find(b.side).first()}},stage:{above:function(){var e={origin:(g.outerHeight()-f.outerHeight())/2,depth:{active:f.outerHeight()/2,next:g.outerHeight()/2}};m.verbose("Setting the initial animation position as above",f,e),g.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(g.outerHeight()-f.outerHeight())/2,depth:{active:f.outerHeight()/2,next:g.outerHeight()/2}};m.verbose("Setting the initial animation position as below",f,e),g.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={origin:(g.outerWidth()-f.outerWidth())/2,depth:{active:f.outerWidth()/2,next:g.outerWidth()/2}};m.verbose("Setting the initial animation position as left",f,e),g.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-90deg) translateZ("+e.depth.next+"px)"})},right:function(){var e={origin:(g.outerWidth()-f.outerWidth())/2,depth:{active:f.outerWidth()/2,next:g.outerWidth()/2}};m.verbose("Setting the initial animation position as left",f,e),g.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(y.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(90deg) translateZ("+e.depth.next+"px)"})},behind:function(){var e={origin:(g.outerWidth()-f.outerWidth())/2,depth:{active:f.outerWidth()/2,next:g.outerWidth()/2}};m.verbose("Setting the initial animation position as behind",f,e),g.css({transform:"rotateY(0deg)"}),f.addClass(y.animating).css({display:"block",left:e.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(i===n)return h[t];h[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(i===n)return m[t];m[t]=i}},debug:function(){h.debug&&(h.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,h.name+":"),m.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,h.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;h.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,d.push({Element:T,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,100)},display:function(){var t=h.name+":",i=0;s=!1,clearTimeout(m.performance.timer),e.each(d,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",p&&(t+=" '"+p+"'"),o.size()>1&&(t+=" ("+o.size()+")"),(console.group!==n||console.table!==n)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,i,o){var r,s,d,u=E;return i=i||c,o=T||o,"string"==typeof t&&u!==n&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(i,a){var o=i!=r?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(u[o])&&i!=r)u=u[o];else{if(u[o]!==n)return s=u[o],!1;if(!e.isPlainObject(u[a])||i==r)return u[a]!==n?(s=u[a],!1):!1;u=u[a]}})),e.isFunction(s)?d=s.apply(o,i):s!==n&&(d=s),e.isArray(a)?a.push(d):a!==n?a=[a,d]:d!==n&&(a=d),s}},l?(E===n&&m.initialize(),m.invoke(u)):(E!==n&&m.destroy(),m.initialize())}),a!==n?a:this},e.fn.shape.settings={name:"Shape",debug:!1,verbose:!0,performance:!0,namespace:"shape",beforeChange:function(){},onChange:function(){},duration:700,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document);