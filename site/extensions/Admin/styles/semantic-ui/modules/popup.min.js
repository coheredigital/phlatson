!function(e,t,o,n){e.fn.popup=function(i){var r,a=e(this),s=e(o),c=a.selector||"",p=(new Date).getTime(),l=[],u=arguments[0],f="string"==typeof u,d=[].slice.call(arguments,1);return a.each(function(){var o,a=e.isPlainObject(i)?e.extend(!0,{},e.fn.popup.settings,i):e.extend({},e.fn.popup.settings),g=a.selector,m=a.className,h=a.error,b=a.metadata,v=a.namespace,y="."+a.namespace,k="module-"+v,w=e(this),x=e(a.context),C=a.target?e(a.target):w,P=e(t),T=a.inline?C.offsetParent():P,A=a.inline?C.next(a.selector.popup):P.children(a.selector.popup).last(),S=0,z=this,E=w.data(k);o={initialize:function(){o.debug("Initializing module",w),"click"==a.on?w.on("click",o.toggle):w.on(o.get.startEvent()+y,o.event.start).on(o.get.endEvent()+y,o.event.end),a.target&&o.debug("Target set to element",C),P.on("resize"+y,o.event.resize),o.instantiate()},instantiate:function(){o.verbose("Storing instance of module",o),E=o,w.data(k,E)},refresh:function(){a.inline?(A=C.next(g.popup),T=C.offsetParent()):A=P.children(g.popup).last()},destroy:function(){o.debug("Destroying previous module"),P.off(y),A.remove(),w.off(y).removeData(k)},event:{start:function(){o.timer=setTimeout(function(){o.is.hidden()&&o.show()},a.delay)},end:function(){clearTimeout(o.timer),o.is.visible()&&o.hide()},resize:function(){o.is.visible()&&o.set.position()}},create:function(){o.debug("Creating pop-up html");var t=w.data(b.html)||a.html,n=w.data(b.variation)||a.variation,i=w.data(b.title)||a.title,r=w.data(b.content)||w.attr("title")||a.content;t||r||i?(t||(t=a.template({title:i,content:r})),A=e("<div/>").addClass(m.popup).addClass(n).html(t),a.inline?(o.verbose("Inserting popup element inline",A),A.data(k,E).insertAfter(w)):(o.verbose("Appending popup element to body",A),A.data(k,E).appendTo(x)),e.proxy(a.onCreate,A)()):o.error(h.content)},toggle:function(){o.debug("Toggling pop-up"),o.is.hidden()?(o.debug("Popup is hidden, showing pop-up"),o.unbind.close(),o.hideAll(),o.show()):(o.debug("Popup is visible, hiding pop-up"),o.hide())},show:function(e){e=e||function(){},o.debug("Showing pop-up",a.transition),a.preserve||o.refresh(),o.exists()||o.create(),o.save.conditions(),o.set.position(),o.animate.show(e)},hide:function(e){e=e||function(){},w.removeClass(m.visible),o.restore.conditions(),o.unbind.close(),o.is.visible()&&o.animate.hide(e)},hideAll:function(){e(g.popup).filter(":visible").popup("hide")},hideGracefully:function(t){t&&0===e(t.target).closest(g.popup).size()?(o.debug("Click occurred outside popup hiding popup"),o.hide()):o.debug("Click was inside popup, keeping popup open")},exists:function(){return a.inline?0!==A.size():A.parent(x).size()},remove:function(){o.debug("Removing popup"),A.remove(),e.proxy(a.onRemove,A)()},save:{conditions:function(){o.cache={title:w.attr("title")},o.cache.title&&w.removeAttr("title"),o.verbose("Saving original attributes",o.cache.title)}},restore:{conditions:function(){return o.cache&&o.cache.title&&(w.attr("title",o.cache.title),o.verbose("Restoring original attributes",o.cache.title)),!0}},animate:{show:function(t){t=t||function(){},w.addClass(m.visible),a.transition&&e.fn.transition!==n&&w.transition("is supported")?A.transition(a.transition+" in",a.duration,function(){o.bind.close(),e.proxy(t,z)()}):A.stop().fadeIn(a.duration,a.easing,function(){o.bind.close(),e.proxy(t,z)()}),e.proxy(a.onShow,z)()},hide:function(t){t=t||function(){},o.debug("Hiding pop-up"),a.transition&&e.fn.transition!==n&&w.transition("is supported")?A.transition(a.transition+" out",a.duration,function(){o.reset(),t()}):A.stop().fadeOut(a.duration,a.easing,function(){o.reset(),t()}),e.proxy(a.onHide,z)()}},get:{startEvent:function(){return"hover"==a.on?"mouseenter":"focus"==a.on?"focus":void 0},endEvent:function(){return"hover"==a.on?"mouseleave":"focus"==a.on?"blur":void 0},offstagePosition:function(){var n={top:e(t).scrollTop(),bottom:e(t).scrollTop()+e(t).height(),left:0,right:e(t).width()},i={width:A.width(),height:A.outerHeight(),position:A.offset()},r={},a=[];return i.position&&(r={top:i.position.top<n.top,bottom:i.position.top+i.height>n.bottom,right:i.position.left+i.width>n.right,left:i.position.left<n.left}),o.verbose("Checking if outside viewable area",i.position),e.each(r,function(e,t){t&&a.push(e)}),a.length>0?a.join(" "):!1},nextPosition:function(e){switch(e){case"top left":e="bottom left";break;case"bottom left":e="top right";break;case"top right":e="bottom right";break;case"bottom right":e="top center";break;case"top center":e="bottom center";break;case"bottom center":e="right center";break;case"right center":e="left center";break;case"left center":e="top center"}return e}},set:{position:function(n,i){var r,s,c=(e(t).width(),e(t).height(),C.outerWidth()),p=C.outerHeight(),l=A.width(),u=A.outerHeight(),f=T.outerWidth(),d=T.outerHeight(),g=a.distanceAway,v=a.inline?C.position():C.offset();switch(n=n||w.data(b.position)||a.position,i=i||w.data(b.offset)||a.offset,a.inline&&("left center"==n||"right center"==n?(i+=parseInt(t.getComputedStyle(z).getPropertyValue("margin-top"),10),g+=-parseInt(t.getComputedStyle(z).getPropertyValue("margin-left"),10)):(i+=parseInt(t.getComputedStyle(z).getPropertyValue("margin-left"),10),g+=parseInt(t.getComputedStyle(z).getPropertyValue("margin-top"),10))),o.debug("Calculating offset for position",n),n){case"top left":r={bottom:d-v.top+g,right:f-v.left-i,top:"auto",left:"auto"};break;case"top center":r={bottom:d-v.top+g,left:v.left+c/2-l/2+i,top:"auto",right:"auto"};break;case"top right":r={top:"auto",bottom:d-v.top+g,left:v.left+c+i,right:"auto"};break;case"left center":r={top:v.top+p/2-u/2+i,right:f-v.left+g,left:"auto",bottom:"auto"};break;case"right center":r={top:v.top+p/2-u/2+i,left:v.left+c+g,bottom:"auto",right:"auto"};break;case"bottom left":r={top:v.top+p+g,right:f-v.left-i,left:"auto",bottom:"auto"};break;case"bottom center":r={top:v.top+p+g,left:v.left+c/2-l/2+i,bottom:"auto",right:"auto"};break;case"bottom right":r={top:v.top+p+g,left:v.left+c+i,bottom:"auto",right:"auto"}}return A.css(r).removeClass(m.position).addClass(n).addClass(m.loading),s=o.get.offstagePosition(),s?(o.debug("Element is outside boundaries",s),S<a.maxSearchDepth?(n=o.get.nextPosition(n),S++,o.debug("Trying new position",n),o.set.position(n)):(o.error(h.recursion),S=0,o.reset(),A.removeClass(m.loading),!1)):(o.debug("Position is on stage",n),S=0,A.removeClass(m.loading),!0)}},bind:{close:function(){"click"==a.on&&a.closable&&(o.verbose("Binding popup close event to document"),s.on("click"+y,function(t){o.verbose("Pop-up clickaway intent detected"),e.proxy(o.hideGracefully,this)(t)}))}},unbind:{close:function(){"click"==a.on&&a.closable&&(o.verbose("Removing close event from document"),s.off("click"+y))}},is:{animating:function(){return A.is(":animated")||A.hasClass(m.animating)},visible:function(){return A.is(":visible")},hidden:function(){return!o.is.visible()}},reset:function(){A.attr("style","").removeAttr("style"),a.preserve||o.remove()},setting:function(t,o){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(o===n)return a[t];a[t]=o}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,o,t);else{if(i===n)return o[t];o[t]=i}},debug:function(){a.debug&&(a.performance?o.performance.log(arguments):(o.debug=Function.prototype.bind.call(console.info,console,a.name+":"),o.debug.apply(console,arguments)))},verbose:function(){a.verbose&&a.debug&&(a.performance?o.performance.log(arguments):(o.verbose=Function.prototype.bind.call(console.info,console,a.name+":"),o.verbose.apply(console,arguments)))},error:function(){o.error=Function.prototype.bind.call(console.error,console,a.name+":"),o.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;a.performance&&(t=(new Date).getTime(),i=p||t,n=t-i,p=t,l.push({Element:z,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(o.performance.timer),o.performance.timer=setTimeout(o.performance.display,100)},display:function(){var t=a.name+":",i=0;p=!1,clearTimeout(o.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",c&&(t+=" '"+c+"'"),(console.group!==n||console.table!==n)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,o,i){var a,s,c,p=E;return o=o||d,i=z||i,"string"==typeof t&&p!==n&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(o,i){var r=o!=a?i+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(p[r])&&o!=a)p=p[r];else{if(p[r]!==n)return s=p[r],!1;if(!e.isPlainObject(p[i])||o==a)return p[i]!==n?(s=p[i],!1):!1;p=p[i]}})),e.isFunction(s)?c=s.apply(i,o):s!==n&&(c=s),e.isArray(r)?r.push(c):r!==n?r=[r,c]:c!==n&&(r=c),s}},f?(E===n&&o.initialize(),o.invoke(u)):(E!==n&&o.destroy(),o.initialize())}),r!==n?r:this},e.fn.popup.settings={name:"Popup",debug:!1,verbose:!0,performance:!0,namespace:"popup",onCreate:function(){},onRemove:function(){},onShow:function(){},onHide:function(){},variation:"",content:!1,html:!1,title:!1,on:"hover",target:!1,closable:!0,context:"body",position:"top center",delay:150,inline:!1,preserve:!1,duration:250,easing:"easeOutQuad",transition:"scale",distanceAway:0,offset:0,maxSearchDepth:10,error:{content:"Your popup has no content specified",method:"The method you called is not defined.",recursion:"Popup attempted to reposition element to fit, but could not find an adequate position."},metadata:{content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{animating:"animating",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},template:function(e){var t="";return typeof e!==n&&(typeof e.title!==n&&e.title&&(t+='<div class="header">'+e.title+'</div class="header">'),typeof e.content!==n&&e.content&&(t+='<div class="content">'+e.content+"</div>")),t}},e.extend(e.easing,{easeOutQuad:function(e,t,o,n,i){return-n*(t/=i)*(t-2)+o}})}(jQuery,window,document);