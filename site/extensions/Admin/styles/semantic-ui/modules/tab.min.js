!function(e,t,a,n){e.fn.tab=function(a){var i,o,r,s,c,u=e.extend(!0,{},e.fn.tab.settings,a),l=e(this),d=e(u.context).find(u.selector.tabs),b=l.selector||"",g={},f=!0,h=0,p=this,m=(new Date).getTime(),v=[],y=u.className,T=u.metadata,x=u.error,A="."+u.namespace,P="module-"+u.namespace,C=l.data(P),E=arguments[0],w=C!==n&&"string"==typeof E,S=[].slice.call(arguments,1);return s={initialize:function(){if(s.debug("Initializing Tabs",l),u.auto&&(s.verbose("Setting up automatic tab retrieval from server"),u.apiSettings={url:u.path+"/{$tab}"}),u.history){if(s.debug("Initializing page state"),e.address===n)return s.error(x.state),!1;if("hash"==u.historyType&&s.debug("Using hash state change to manage state"),"html5"==u.historyType){if(s.debug("Using HTML5 to manage state"),u.path===!1)return s.error(x.path),!1;e.address.history(!0).state(u.path)}e.address.unbind("change").bind("change",s.event.history.change)}e.isWindow(p)||(s.debug("Attaching tab activation events to element",l),l.on("click"+A,s.event.click)),s.instantiate()},instantiate:function(){s.verbose("Storing instance of module",s),l.data(P,s)},destroy:function(){s.debug("Destroying tabs",l),l.removeData(P).off(A)},event:{click:function(t){var a=e(this).data(T.tab);a!==n?(u.history?(s.verbose("Updating page state",t),e.address.value(a)):(s.verbose("Changing tab without state management",t),s.changeTab(a)),t.preventDefault()):s.debug("No tab specified")},history:{change:function(t){var a=t.pathNames.join("/")||s.get.initialPath(),i=u.templates.determineTitle(a)||!1;s.debug("History change event",a,t),r=t,a!==n&&s.changeTab(a),i&&e.address.title(i)}}},refresh:function(){i&&(s.debug("Refreshing tab",i),s.changeTab(i))},cache:{read:function(e){return e!==n?g[e]:!1},add:function(e,t){e=e||i,s.debug("Adding cached content for",e),g[e]=t},remove:function(e){e=e||i,s.debug("Removing cached content for",e),delete g[e]}},set:{state:function(t){e.address.value(t)}},changeTab:function(a){var n=t.history&&t.history.pushState,c=n&&u.ignoreFirstLoad&&f,l=u.auto||e.isPlainObject(u.apiSettings),d=l&&!c?s.utilities.pathToArray(a):s.get.defaultPathArray(a);a=s.utilities.arrayToPath(d),s.deactivate.all(),e.each(d,function(t,n){var b,g,h,p=d.slice(0,t+1),m=s.utilities.arrayToPath(p),v=s.is.tab(m),y=t+1==d.length,T=s.get.tabElement(m);return s.verbose("Looking for tab",n),v?(s.verbose("Tab was found",n),i=m,o=s.utilities.filterArray(d,p),y?h=!0:(b=d.slice(0,t+2),g=s.utilities.arrayToPath(b),h=!s.is.tab(g),h&&s.verbose("Tab parameters found",b)),h&&l?(c?(s.debug("Ignoring remote content on first tab load",m),f=!1,s.cache.add(a,T.html()),s.activate.all(m),e.proxy(u.onTabInit,T)(m,o,r),e.proxy(u.onTabLoad,T)(m,o,r)):(s.activate.navigation(m),s.content.fetch(m,a)),!1):(s.debug("Opened local tab",m),s.activate.all(m),s.cache.read(m)||(s.cache.add(m,!0),s.debug("First time tab loaded calling tab init"),e.proxy(u.onTabInit,T)(m,o,r)),e.proxy(u.onTabLoad,T)(m,o,r),void 0)):(s.error(x.missingTab,n),!1)})},content:{fetch:function(t,a){var c,l,d=s.get.tabElement(t),b={dataType:"html",stateContext:d,success:function(n){s.cache.add(a,n),s.content.update(t,n),t==i?(s.debug("Content loaded",t),s.activate.tab(t)):s.debug("Content loaded in background",t),e.proxy(u.onTabInit,d)(t,o,r),e.proxy(u.onTabLoad,d)(t,o,r)},urlData:{tab:a}},g=d.data(T.promise)||!1,f=g&&"pending"===g.state();a=a||t,l=s.cache.read(a),u.cache&&l?(s.debug("Showing existing content",a),s.content.update(t,l),s.activate.tab(t),e.proxy(u.onTabLoad,d)(t,o,r)):f?(s.debug("Content is already loading",a),d.addClass(y.loading)):e.api!==n?(console.log(u.apiSettings),c=e.extend(!0,{headers:{"X-Remote":!0}},u.apiSettings,b),s.debug("Retrieving remote content",a,c),e.api(c)):s.error(x.api)},update:function(e,t){s.debug("Updating html for",e);var a=s.get.tabElement(e);a.html(t)}},activate:{all:function(e){s.activate.tab(e),s.activate.navigation(e)},tab:function(e){var t=s.get.tabElement(e);s.verbose("Showing tab content for",t),t.addClass(y.active)},navigation:function(e){var t=s.get.navElement(e);s.verbose("Activating tab navigation for",t,e),t.addClass(y.active)}},deactivate:{all:function(){s.deactivate.navigation(),s.deactivate.tabs()},navigation:function(){l.removeClass(y.active)},tabs:function(){d.removeClass(y.active+" "+y.loading)}},is:{tab:function(e){return e!==n?s.get.tabElement(e).size()>0:!1}},get:{initialPath:function(){return l.eq(0).data(T.tab)||d.eq(0).data(T.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return s.utilities.pathToArray(s.get.defaultPath(e))},defaultPath:function(e){var t=l.filter("[data-"+T.tab+'^="'+e+'/"]').eq(0),a=t.data(T.tab)||!1;if(a){if(s.debug("Found default tab",a),h<u.maxDepth)return h++,s.get.defaultPath(a);s.error(x.recursion)}else s.debug("No default tabs found for",e,d);return h=0,e},navElement:function(e){return e=e||i,l.filter("[data-"+T.tab+'="'+e+'"]')},tabElement:function(e){var t,a,n,o;return e=e||i,n=s.utilities.pathToArray(e),o=s.utilities.last(n),t=d.filter("[data-"+T.tab+'="'+o+'"]'),a=d.filter("[data-"+T.tab+'="'+e+'"]'),t.size()>0?t:a},tab:function(){return i}},utilities:{filterArray:function(t,a){return e.grep(t,function(t){return-1==e.inArray(t,a)})},last:function(t){return e.isArray(t)?t[t.length-1]:!1},pathToArray:function(e){return e===n&&(e=i),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return e.isArray(t)?t.join("/"):!1}},setting:function(t,a){if(e.isPlainObject(t))e.extend(!0,u,t);else{if(a===n)return u[t];u[t]=a}},internal:function(t,a){if(e.isPlainObject(t))e.extend(!0,s,t);else{if(a===n)return s[t];s[t]=a}},debug:function(){u.debug&&(u.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,u.name+":"),s.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,u.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var t,a,n;u.performance&&(t=(new Date).getTime(),n=m||t,a=t-n,m=t,v.push({Element:p,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":a})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,100)},display:function(){var t=u.name+":",a=0;m=!1,clearTimeout(s.performance.timer),e.each(v,function(e,t){a+=t["Execution Time"]}),t+=" "+a+"ms",b&&(t+=" '"+b+"'"),(console.group!==n||console.table!==n)&&v.length>0&&(console.groupCollapsed(t),console.table?console.table(v):e.each(v,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),v=[]}},invoke:function(t,a,i){var o,r,s,u=C;return a=a||S,i=p||i,"string"==typeof t&&u!==n&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(a,i){var s=a!=o?i+t[a+1].charAt(0).toUpperCase()+t[a+1].slice(1):t;if(e.isPlainObject(u[s])&&a!=o)u=u[s];else{if(u[s]!==n)return r=u[s],!1;if(!e.isPlainObject(u[i])||a==o)return u[i]!==n?(r=u[i],!1):!1;u=u[i]}})),e.isFunction(r)?s=r.apply(i,a):r!==n&&(s=r),e.isArray(c)?c.push(s):c!==n?c=[c,s]:s!==n&&(c=s),r}},w?(C===n&&s.initialize(),s.invoke(E)):(C!==n&&s.destroy(),s.initialize()),c!==n?c:this},e.tab=function(a){e(t).tab(a)},e.fn.tab.settings={name:"Tab",debug:!1,verbose:!0,performance:!0,namespace:"tab",onTabInit:function(){},onTabLoad:function(){},templates:{determineTitle:function(){}},auto:!1,history:!0,historyType:"hash",path:!1,context:"body",maxDepth:25,ignoreFirstLoad:!1,alwaysRefresh:!1,cache:!0,apiSettings:!1,error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Tab cannot be found",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",state:"The state library has not been initialized"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab"}}}(jQuery,window,document);